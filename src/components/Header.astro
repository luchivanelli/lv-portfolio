---
---

<header class="h-[80px] flex justify-center items-center">
  <nav class="border-2 border-[#7a7a7a50] rounded-3xl w-2/3 pb-2 pt-3 lg:pt-2 fixed top-4 flex flex-col lg:flex-row justify-between max-w-[600px] z-50">
    <!-- Links desktop -->
    <div id="nav-links" class="lg:flex gap-3 px-2 text-primary hidden">
      <a href="#home" class="nav-link link p-2 text-secondary cursor-pointer rounded-3xl" data-target="home">Home</a>
      <a href="#experience" class="nav-link link p-2 text-secondary cursor-pointer rounded-3xl" data-target="experience">Experience</a>
      <a href="#projects" class="nav-link link p-2 text-secondary cursor-pointer rounded-3xl" data-target="projects">Projects</a>
      <a href="#about-me" class="nav-link link p-2 text-secondary cursor-pointer rounded-3xl" data-target="about-me">About me</a>
    </div>

    <!-- Icons -->
    <div class="flex justify-between items-center">
      <div id="nav-icons" class="px-4 flex justify-center items-center gap-3">
        <a href="https://www.linkedin.com/in/luciana-vanelli/" target="_blank" rel="noopener noreferrer">
          <img src="/assets/brand-linkedin.svg" alt="Linkedin" class="w-6 h-6 hover:scale-110 transition-all">
        </a>
        <a href="https://github.com/luchivanelli" target="_blank" rel="noopener noreferrer">
          <img src="/assets/github.svg" alt="Github" class="w-6 h-6 hover:scale-110 transition-all">
        </a>
        <a href="mailto:lucianavanelli13@gmail.com" target="_blank" rel="noopener noreferrer">
          <img src="/assets/mail.svg" alt="Gmail" class="w-6 h-6 hover:scale-110 transition-all">
        </a>
      </div>

      <!-- Mobile -->
      <div class="lg:hidden py-1">
        <img id="button-nav" class="px-4 cursor-pointer transition-transform duration-200 hover:scale-110" src="/assets/menu-3.svg" alt="">
      </div>
    </div>

    <!-- Mobile navigation menu -->
    <div 
      id="mobile-nav-menu" 
      class="text-center grid grid-cols-2 text-white px-2 pt-1 gap-1 lg:hidden
             transform transition-all duration-500 ease-in-out opacity-0 
              pointer-events-none overflow-hidden max-h-0"
    >
      <a href="#home" class="nav-link mobile-link rounded-3xl p-1" data-target="home">Home</a>
      <a href="#experience" class="nav-link mobile-link rounded-3xl p-1" data-target="experience">Experience</a>
      <a href="#projects" class="nav-link mobile-link rounded-3xl p-1" data-target="projects">Projects</a>
      <a href="#about-me" class="nav-link mobile-link rounded-3xl p-1" data-target="about-me">About me</a>
    </div>
  </nav>
</header>

<style>
  .link:hover,
  .mobile-link:hover {
    background-color: #7a7a7a50;
  }

  /* Estados del menú móvil */
  #mobile-nav-menu {
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  #mobile-nav-menu.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
    max-height: 200px;
  }

  /* Delays escalonados para los enlaces */
  #mobile-nav-menu.show .mobile-link:nth-child(1) {
    transition-delay: 0.1s;
  }

  #mobile-nav-menu.show .mobile-link:nth-child(2) {
    transition-delay: 0.15s;
  }

  #mobile-nav-menu.show .mobile-link:nth-child(3) {
    transition-delay: 0.2s;
  }

  #mobile-nav-menu.show .mobile-link:nth-child(4) {
    transition-delay: 0.25s;
  }

  /* Responsive - ocultar en desktop */
  @media (min-width: 1024px) {
    #mobile-nav-menu {
      display: none !important;
    }
  }
</style>

<script>
  import { gsap } from "gsap";
  import ScrollToPlugin from "gsap/ScrollToPlugin";

  gsap.registerPlugin(ScrollToPlugin);

  const buttonNav = document.getElementById("button-nav");
  const mobileNavMenu = document.getElementById("mobile-nav-menu");
  const navLinks = document.querySelectorAll(".nav-link");
  let isMenuOpen = false;

  // Función para scroll suave a secciones
  function scrollToSection(target) {
    const element = document.getElementById(target);
    if (element) {
      gsap.to(window, {
        duration: 1.5,
        scrollTo: {
          y: element,
          offsetY: 80
        },
        ease: "power2.inOut"
      });
    }
  }

  // Función para toggle del menú móvil
  function toggleMobileMenu() {
    isMenuOpen = !isMenuOpen;
    
    if (isMenuOpen) {
      // Mostrar menú
      mobileNavMenu.classList.add('show');
      buttonNav.classList.add('active');
      
    } else {
      // Ocultar menú
      mobileNavMenu.classList.remove('show');
      buttonNav.classList.remove('active');
      
      // Animación GSAP para cerrar
      gsap.to(buttonNav, {
        rotation: 0,
        scale: 1,
        duration: 0.3,
        ease: "power2.out"
      });
    }
  }

  // Event listener para el botón de menú móvil
  if (buttonNav) {
    buttonNav.addEventListener("click", toggleMobileMenu);
  }

  // Event listeners para todos los links de navegación
  navLinks.forEach(link => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const target = link.getAttribute("data-target");
      
      // Cerrar menú móvil si está abierto y es un enlace móvil
      if (isMenuOpen && link.classList.contains('mobile-link')) {
        toggleMobileMenu();
        // Esperar a que se cierre antes de hacer scroll
        setTimeout(() => scrollToSection(target), 400);
      } else {
        scrollToSection(target);
      }
    });
  });

  // Cerrar menú al hacer clic fuera
  document.addEventListener('click', (e) => {
    if (isMenuOpen && !e.target.closest('nav') && !e.target.closest('#button-nav')) {
      toggleMobileMenu();
    }
  });

  // Cerrar menú al redimensionar ventana
  window.addEventListener('resize', () => {
    if (window.innerWidth >= 1024 && isMenuOpen) {
      toggleMobileMenu();
    }
  });

  // Animaciones de entrada del header
  gsap.from("header", {
    y: -80,
    opacity: 0,
    duration: 1,
    delay: 1,
    ease: "power3.out"
  });

  // Animación escalonada de los links (desktop)
  gsap.from("#nav-links a", {
    opacity: 0,
    y: -20,
    duration: 0.6,
    stagger: 0.1,
    delay: 1.3,
    ease: "power2.out"
  });

  // Animación escalonada de los íconos
  gsap.from("#nav-icons a", {
    opacity: 0,
    scale: 0.5,
    duration: 0.5,
    stagger: 0.15,
    delay: 1.6,
    ease: "back.out(1.7)"
  });

  
</script>